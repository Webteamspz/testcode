var productImages = [
  {
    className: "wpb",
    strapeImage1: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_White_Panda_Bicompax_No_Date_Extra_1100x.png?v=1598537459",
    strapeImage2: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_White_Panda_Bicompax_Date_Extra_1100x.png?v=1598537459",
    withoutDate1: "https://iili.io/H8b87e9.png",
    withoutDate2: "https://iili.io/H8b8he1.png",
    withDate1: "https://iili.io/H8bvLlV.png",
    withDate2: "https://iili.io/H8b89WJ.png",
  },
  {
    className: "spb",
    strapeImage1: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Panda_Bicompax_No_Date_Extra_1100x.png?v=1598537459",
    strapeImage2: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Panda_Bicompax_Date_Extra_1100x.png?v=1598537459",
    withoutDate1: "https://iili.io/H8bU7ou.png",
    withoutDate2: "https://iili.io/H8bU0cQ.png",
    withDate1: "https://iili.io/H8bUoF4.png",
    withDate2: "https://iili.io/H8bUzS2.png",
  },
  {
    className: "epb",
    strapeImage1: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Evil_Panda_Bicompax_No_Date_Extra_1100x.png?v=1598537459",
    strapeImage2: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Evil_Panda_Bicompax_Date_Extra_1100x.png?v=1598537459",
    withoutDate1: "https://iili.io/H8bg7eI.png",
    withoutDate2: "https://iili.io/H8bgWdl.png",
    withDate1: "https://iili.io/H8bgKJV.png",
    withDate2: "https://iili.io/H8bgqOP.png",
  },
  {
    className: "sb",
    strapeImage1: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Silver_Bicompax_No_Date_Extra_1100x.png?v=1598537459",
    strapeImage2: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Silver_Bicompax_Date_Extra_1100x.png?v=1598537459",
    withoutDate1: "https://iili.io/H8brkuI.png",
    withoutDate2: "https://iili.io/H8br8ZX.png",
    withDate1: "https://iili.io/H8brGZF.png",
    withDate2: "https://iili.io/H8brNvp.png",
  },
  {
    className: "sgb",
    strapeImage1: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Slate_Grey_Bicompax_No_Date_Extra_1100x.png?v=1598537459",
    strapeImage2: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Slate_Grey_Bicompax_Date_Extra_1100x.png?v=1598537459",
    withoutDate1: "https://iili.io/H8b48HQ.png",
    withoutDate2: "https://iili.io/H8b4SRV.png",
    withDate1: "https://iili.io/H8b4MR2.png",
    withDate2: "https://iili.io/H8b4OKb.png",
  },
  {
    className: "wpt",
    strapeImage1: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_White_Panda_No_Date_Extra_1100x.png?v=1598537459",
    strapeImage2: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_White_Panda_Date_Extra_1100x.png?v=1598537459",
    withoutDate1: "https://iili.io/H8b6MrJ.png",
    withoutDate2: "https://iili.io/H8b6hep.png",
    withDate1: "https://iili.io/H8b4yxt.png",
    withDate2: "https://iili.io/H8b63gf.png",
  },
  {
    className: "spt",
    strapeImage1: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Panda_No_Date_Extra_1100x.png?v=1598537459",
    strapeImage2: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Panda_Date_Extra_1100x.png?v=1598537459",
    withoutDate1: "https://iili.io/H8bi3Al.png",
    withoutDate2: "https://iili.io/H8biKtS.png",
    withDate1: "https://iili.io/H8bPmMX.png",
    withDate2: "https://iili.io/H8biHcG.png",
  },
  {
    className: "ept",
    strapeImage1: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Evil_Panda_No_Date_Extra_1100x.png?v=1598537459",
    strapeImage2: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Evil_Panda_Date_Extra_1100x.png?v=1598537459",
    withoutDate1: "https://iili.io/H8biWDN.png",
    withoutDate2: "https://iili.io/H8biOfn.png",
    withDate1: "https://iili.io/H8bilKg.png",
    withDate2: "https://iili.io/H8bi1UJ.png",
  },
  {
    className: "st",
    strapeImage1: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Silver_No_Date_Extra_1100x.png?v=1598537459",
    strapeImage2: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Silver_Date_Extra_1100x.png?v=1598537459",
    withoutDate1: "https://iili.io/H8bLnvj.png",
    withoutDate2: "https://iili.io/H8bLIjV.png",
    withDate1: "https://iili.io/H8bLFC7.png",
    withDate2: "https://iili.io/H8bLKG9.png",
  },
  {
    className: "sgt",
    strapeImage1: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Slate_Grey_No_Date_Extra_1100x.png?v=1598537459",
    strapeImage2: "https://cdn.shopify.com/s/files/1/1238/1014/products/Dan_Henry_1964_Gran_Turismo_Slate_Grey_Date_Extra_1100x.png?v=1598537459",
    withoutDate1: "https://iili.io/H8bLe9f.png",
    withoutDate2: "https://iili.io/H8bLZwQ.png",
    withDate1: "https://iili.io/H8bLRG1.png",
    withDate2: "https://iili.io/H8bLY3g.png",
  }
];

function waitForElement(selector, callback) {
  var element = document.querySelector(selector);
  if (element) {
    // Element found, call the callback function
    callback(element);
  } else {
    // Element not found, wait for 100 milliseconds and then check again
    setTimeout(function () {
      waitForElement(selector, callback);
    }, 100);
  }
}

// Usage example: wait for an element with id "myElement" to appear on the page
waitForElement("#ProductPhoto .lightbox-img", function (element) {
  $('body').addClass('dhw-1964');
  $('body').append(`<script src="
        https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js
        "></script>
        <link href="
        https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css
        " rel="stylesheet">`);

  $('#ProductPhoto').append(`<div class="productWrapper">    
          <div class="slider">
            <div class="one img-wrapper">
              <div class="strape-change-wrapper"><div class="strape-change">Check 2nd strap</div></div>
            </div>
            <div class="two img-wrapper">
            </div>
            <div class="img-wrapper">
              <img src="https://iili.io/H8bt2Qp.png"
                  alt="1964">
            </div>
            <div class="img-wrapper">
              <img src="https://iili.io/H8btGZQ.png"
                  alt="1964">
            </div>
            <div class="img-wrapper">
              <img src="https://iili.io/H8btX6P.png"
                  alt="1964">
            </div>
            <div class="img-wrapper">
              <img src="https://iili.io/H8btZNf.png"
                  alt="1964">
            </div>
          </div>
          <div class="thumbnail-slider">
          <div class="one thumbnail-wrapper">
            </div>
            <div class="two thumbnail-wrapper">
            </div>
            <div class="thumbnail-wrapper">
              <img src="https://iili.io/H8bt2Qp.png"
                  alt="1964">
            </div>
            <div class="thumbnail-wrapper">
              <img src="https://iili.io/H8btGZQ.png"
                  alt="1964">
            </div>
            <div class="thumbnail-wrapper">
              <img src="https://iili.io/H8btX6P.png"
                  alt="1964">
            </div>
            <div class="thumbnail-wrapper">
              <img src="https://iili.io/H8btZNf.png"
                  alt="1964">
            </div>
          </div>
        </div>`);

  for (let i = 0; i < 10; i++) {
    $('#ProductPhoto .slider .one').append('<img class="withDate ' + productImages[i].className + '" src="' + productImages[i].withDate1 + '" alt="1964"><img class="withoutDate ' + productImages[i].className + '" src="' + productImages[i].withoutDate1 + '" alt="1964"><img class="strapeImageWithoutDate ' + productImages[i].className + '" src="' + productImages[i].strapeImage1 + '" alt="1964"><img class="strapeImageWithDate ' + productImages[i].className + '" src="' + productImages[i].strapeImage2 + '" alt="1964">');
    $('#ProductPhoto .slider .two').append('<img class="withDate ' + productImages[i].className + '" src="' + productImages[i].withDate2 + '" alt="1964"><img class="withoutDate ' + productImages[i].className + '" src="' + productImages[i].withoutDate2 + '" alt="1964">');
    $('#ProductPhoto .thumbnail-slider .one').append('<img class="withDate ' + productImages[i].className + '" src="' + productImages[i].withDate1 + '" alt="1964"><img class="withoutDate ' + productImages[i].className + '" src="' + productImages[i].withoutDate1 + '" alt="1964"><img class="strapeImageWithoutDate ' + productImages[i].className + '" src="' + productImages[i].strapeImage1 + '" alt="1964"><img class="strapeImageWithDate ' + productImages[i].className + '" src="' + productImages[i].strapeImage2 + '" alt="1964">');
    $('#ProductPhoto .thumbnail-slider .two').append('<img class="withDate ' + productImages[i].className + '" src="' + productImages[i].withDate2 + '" alt="1964"><img class="withoutDate ' + productImages[i].className + '" src="' + productImages[i].withoutDate2 + '" alt="1964">');
  }
    $('#productDetails').attr('productName', 'GranTurismoWhitePandaBicompaxNoDate');
  $.getScript('https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js', function () {
    $(document).ready(function () {
      // Initialize main slider
      $('.slider').slick({
        dots: false,
        arrows: true,
        prevArrow: '<svg class="previous slider-arrow" width="16" height="28" viewBox="0 0 16 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 26L2 14L14 2" stroke="#BB8D51" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>',
        nextArrow: '<svg class="next slider-arrow" width="16" height="28" viewBox="0 0 16 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 2L14 14L2 26" stroke="#BB8D51" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>',
        infinite: false,
        speed: 500,
        adaptiveHeight: false,
        fade: true,
        cssEase: 'linear',
        asNavFor: '.thumbnail-slider',
        responsive: [
          {
            breakpoint: 1024,
            settings: {
              dots: true,
              arrows: false
            }
          }
        ]
      });

      // Initialize thumbnail slider
      $('.thumbnail-slider').slick({
        dots: false,
        arrows: false,
        slidesToShow: 6,
        slidesToScroll: 1,
        focusOnSelect: true,
        asNavFor: '.slider',
        responsive: [
          {
            breakpoint: 768,
            settings: {
              slidesToShow: 4
            }
          },
          {
            breakpoint: 576,
            settings: {
              slidesToShow: 3
            }
          }
        ]
      });

      // Image click
      $('.slider .img-wrapper img').on('click', function () {
        $('#ProductPhotoImg').click();
        $('.mfp-img').attr('src', $(this).attr('src'));
      });

      // Strape Image Change
      $('.strape-change').on('click', function () {
        $('.hide-1964').click();
        $(this).text($('.hide-1964').text());
      });
    });
  });

  // Select the element you want to observe
  const targetElement = document.querySelector('#ProductPhoto .lightbox-img');

  // Create a MutationObserver instance
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      // Handle the mutation as needed
      var product = $('#ProductPhoto .lightbox-img').attr('href').split('1964_')[1];
      if(product.indexOf('Extra') > 0) {
        var productName = product.split('xtra')[0].replaceAll('_', '').replaceAll('100x','').replaceAll('1000x','');
      } else {
          var productName = product.split('.png')[0].replaceAll('_', '').replaceAll('100x','').replaceAll('1000x','');
      }
      $('#productDetails').attr('productName', productName);
      if($('.productWrapper .slider.slick-initialized').length > 0) {
        $('.productWrapper .slider').slick("slickGoTo", 0);
      }
      $('.strape-change').text($('.hide-1964').text());
    });
  });

  // Configuration for the observer 
  const config = {
    attributes: true, // Observe changes to attributes
  };

  // Start observing the target element
  observer.observe(targetElement, config);
});